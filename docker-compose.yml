version: '3.8'
services:
  mongodb:
    image: mongo:6.0
    container_name: local_mongodb
    restart: always
    ports:
      - "27017:27017"  # MongoDB listens on 27017 inside the container
    volumes:
      - mongodb_data:/data/db  # Persistent storage for MongoDB
    networks:
      - local_network

  proxy_server:
    build:
      context: ./proxy  # Path to the proxy server code
    container_name: proxy_server
    restart: always
    ports:
      - "5010:5010"  # Proxy server runs on port 5010
    depends_on:
      - mongodb  # Ensure MongoDB starts before the proxy server
    networks:
      - local_network

volumes:
  mongodb_data:

networks:
  local_network:
    driver: bridge
